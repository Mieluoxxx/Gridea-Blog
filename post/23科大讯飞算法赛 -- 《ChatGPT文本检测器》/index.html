<html lang="zh">
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>23科大讯飞算法赛 -- 《ChatGPT文本检测器》 | 咕噜咕噜魔法使</title>

<link rel="shortcut icon" href="https://lab.moguw.top/favicon.ico?v=1711027564217">

<link href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://lab.moguw.top/styles/main.css">
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    
<link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/styles/base16/solarized-light.min.css">

<script src="https://fastly.jsdelivr.net/combine/gh/highlightjs/cdn-release@11.3.1/build/highlight.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/cpp.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/csharp.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/c.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/python.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/rust.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/xml.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/javascript.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/powershell.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/shell.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/sql.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/http.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/go.min.js,gh/highlightjs/cdn-release@11.3.1/build/languages/css.min.js"></script>

<!-- <script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/highlight.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/cpp.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/csharp.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/c.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/python.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/rust.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/xml.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/javascript.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/powershell.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/shell.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/sql.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/http.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/go.min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/languages/css.min.js"></script>
 -->

    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/viewerjs@1.10.2/dist/viewer.min.css" />
<script src="https://fastly.jsdelivr.net/npm/viewerjs@1.10.2/dist/viewer.min.js"></script>

    <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
    
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="/">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            咕噜咕噜魔法使
        </div>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    首页
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    归档
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    标签
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="https://lab.moguw.top/tag/nl6HTtVUL/" class="menu gt-a-link">
                    考研408
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1711027564217"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* 移动端导航栏展开/收起切换 */
    document.getElementById('changeNavbar').onclick = function () {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    23科大讯飞算法赛 -- 《ChatGPT文本检测器》
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2023-07-05 ·
                    </time>
                    
                        <a href="https://lab.moguw.top/tag/s4tE9Viqx/" class="post-tags">
                            # 算法赛
                        </a>
                    
                </div>
                <div class="post-content">
                    <h1 id="背景介绍"><strong>背景介绍</strong></h1>
<pre><code class="language-PowerShell">    近年来人工智能在自然语言处理领域取得了巨大的进展。其中一项引人注目的技术是生成模型，如OpenAI的GPT-3.5。这类模型通过学习大量的文本数据，具备了生成高质量文本的能力，从而引发了一系列关于文本生成真实性的讨论。

    正因为生成模型的迅猛发展，也引发了一个新的挑战，即如何区分人类编写的文本与机器生成的文本。传统上，我们借助语法错误、逻辑不连贯等特征来辨别机器生成的文本，但随着生成模型的不断改进，这些特征变得越来越难以区分。因此，为了解决这一问题，研究人员开始探索使用NLP文本分类技术来区分人类编写的文本和机器生成的文本。
</code></pre>
<h2 id="任务一报名比赛下载比赛数据集并完成读取">任务一：报名比赛，下载比赛数据集并完成读取</h2>
<figure data-type="image" tabindex="1"><img src="https://flowus.cn/preview/0657ac6a-c289-4a06-9e94-735e8523349e" alt="图片.png" loading="lazy"></figure>
<pre><code class="language-Python">import pandas as pd

train_df = pd.read_csv('/kaggle/input/chatgpt-text-generation-detection/ChatGPT-/ChatGPT生成文本检测器公开数据-更新/train.csv')
test_df = pd.read_csv('/kaggle/input/chatgpt-text-generation-detection/ChatGPT-/ChatGPT生成文本检测器公开数据-更新/test.csv')
train_df.shape, test_df.shape
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://flowus.cn/preview/8be70010-0356-4594-ba4d-a85e822c294d" alt="图片.png" loading="lazy"></figure>
<h2 id="任务二对数据集字符进行可视化统计标签和字符分布"><strong>任务二：对数据集字符进行可视化，统计标签和字符分布</strong></h2>
<ul>
<li>
<p>说明：在这个任务中，你需要使用Pandas库对数据集的字符进行可视化，并统计数据集中的标签和字符的分布情况，以便更好地理解数据集。</p>
</li>
<li>
<p>实践步骤：</p>
<ol>
<li>
<p>使用Pandas库读取和加载数据集。</p>
</li>
<li>
<p>使用Pandas的可视化功能，如柱状图或饼图，对数据集的字符进行可视化展示。</p>
</li>
<li>
<p>使用Pandas的统计功能，如value_counts()方法，统计数据集中的标签和字符的分布情况。</p>
</li>
</ol>
</li>
</ul>
<pre><code class="language-Python"># 对输入的内容进行处理
train_df['content'] = train_df['content'].apply(lambda x: x[1:-1].strip().replace('\\n', ' \\n '))
test_df['content'] = test_df['content'].apply(lambda x: x[1:-1].strip().replace('\\n', ' \\n '))

train_df['content'] = train_df['content'].apply(lambda x: x.split(' '))
test_df['content'] = test_df['content'].apply(lambda x: x.split(' '))

label_counts = train_df['label'].value_counts()
label_counts
</code></pre>
<pre><code class="language-Python">from collections import Counter

c = Counter()
total_characters = 0

for content in train_df['content']:
    c.update(content)
    total_characters += len(content)

most_common_characters = c.most_common(10)

stop_words = []
# Saving most common characters and their frequencies
for char, count in most_common_characters:
    percentage = (count / total_characters) * 100
    stop_words.append((char, count, percentage))

# Print the results
print(&quot;Top 10 most common characters:&quot;)
for char, count, percentage in top_10_characters:
    print(f&quot;Character: '{char}', Count: {count}, Percentage: {percentage:.2f}%&quot;)
</code></pre>
<pre><code class="language-Python">max_vocab_train = max(len(doc) for doc in train_df['content'])
max_vocab_test = max(len(doc) for doc in test_df['content'])

max_vocab = max(max_vocab_train, max_vocab_test)
print(&quot;最多词汇数量:&quot;, max_vocab)
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://flowus.cn/preview/df218090-f310-4b3d-9582-cf47a5a245a6" alt="图片.png" loading="lazy"></figure>
<h2 id="任务三使用tfidf提取文本特征"><strong>任务三：使用TFIDF提取文本特征</strong></h2>
<ul>
<li>
<p>说明：在这个任务中，你需要使用Sklearn库中的TFIDF技术来提取文本特征，将文本转化为可供机器学习算法使用的数值表示。</p>
</li>
<li>
<p>实践步骤：</p>
<ol>
<li>
<p>准备文本数据集。</p>
</li>
<li>
<p>使用Sklearn的<code>TfidfVectorizer</code>类，设置相应的参数（如<code>ngram_range</code>、<code>max_features</code>等）来构建TFIDF特征提取器。</p>
</li>
<li>
<p>使用<code>TfidfVectorizer</code>的<code>fit_transform()</code>方法，对文本数据集进行特征提取，得到TFIDF特征矩阵。</p>
</li>
</ol>
</li>
</ul>
<p><code>TfidfVectorizer</code>是scikit-learn库中的一个文本特征提取工具，用于将文本数据转换为TF-IDF特征表示。下面是对<code>TfidfVectorizer</code>函数的功能和常用超参数的介绍：</p>
<ul>
<li>
<p><code>ngram_range</code>：特征中要包含的n元语法范围，默认为(1, 1)，表示只提取单个词。</p>
</li>
<li>
<p><code>max_df</code>：单词的最大文档频率，超过该频率的单词将被忽略，默认为1.0，表示不忽略任何单词。</p>
</li>
<li>
<p><code>min_df</code>：单词的最小文档频率，低于该频率的单词将被忽略，默认为1，表示不忽略任何单词。</p>
</li>
</ul>
<pre><code class="language-Python">from sklearn.feature_extraction.text import TfidfVectorizer
tfidf = TfidfVectorizer()
tfidf.fit(train_df['content'].apply(lambda x: ' '.join(x)))
train_tfidf_feat = tfidf.transform(train_df['content'].apply(lambda x: ' '.join(x)))
test_tfidf_feat = tfidf.transform(test_df['content'].apply(lambda x: ' '.join(x)))
</code></pre>
<figure data-type="image" tabindex="4"><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1f0e6765-cd54-4292-94f9-9f979802c907/Untitled.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1f0e6765-cd54-4292-94f9-9f979802c907/Untitled.png" loading="lazy"></figure>
<h2 id="任务四使用tfidf特征和线性模型完成训练和预测"><strong>任务四：使用TFIDF特征和线性模型完成训练和预测</strong></h2>
<ul>
<li>
<p>说明：在这个任务中，你需要使用TFIDF特征和线性模型（如逻辑回归）完成训练和预测，通过机器学习算法来区分人类编写的文本和机器生成的文本。</p>
</li>
<li>
<p>实践步骤：</p>
<ol>
<li>
<p>准备TFIDF特征矩阵和相应的标签。</p>
</li>
<li>
<p>划分训练集和验证集集。</p>
</li>
<li>
<p>使用Sklearn中的线性模型（如逻辑回归）进行训练，并使用训练好的模型对验证集集进行预测。</p>
</li>
<li>
<p>评估模型的性能，如准确率、精确率、召回率等指标。</p>
</li>
<li>
<p>选择得到合适的模型，对测试集进行预测，并提高到比赛页面https://challenge.xfyun.cn/topic/info?type=text-detector&amp;ch=vWxQGFU</p>
</li>
</ol>
<pre><code class="language-Python"></code></pre>
</li>
</ul>
<p>from sklearn.model_selection import cross_val_predict<br>
from sklearn.linear_model import LogisticRegression<br>
from sklearn.metrics import classification_report</p>
<h1 id="使用cross_val_predict函数进行交叉验证">使用cross_val_predict()函数进行交叉验证</h1>
<p>val_pred = cross_val_predict(<br>
LogisticRegression(),<br>
train_tfidf_feat,<br>
train_df['label']<br>
)</p>
<h1 id="计算并输出分类报告">计算并输出分类报告</h1>
<p>print(classification_report(train_df['label'], val_pred, digits=3))</p>
<pre><code>

  在这个场景中使用交叉验证的目的是为了更准确地评估模型的性能和泛化能力。交叉验证是一种评估机器学习模型的统计方法，通过将数据集划分为多个子集，在不同的训练和验证集上多次训练和评估模型，以得到更可靠的性能指标。

  如果你想要提高模型的精度，可以尝试调整`TfidfVectorizer`的一些超参数。以下是一些常用的超参数，你可以根据实际情况进行调整：

  6. `ngram_range`：n元语法范围。通过将`ngram_range`设置为大于1的值，可以考虑多个连续的词作为特征，从而捕捉更多的语义信息。例如，将`ngram_range`设置为(1, 2)可以同时考虑单个词和相邻的词作为特征。

  7. `max_df`和`min_df`：单词的最大和最小文档频率。通过调整`max_df`和`min_df`的值，可以过滤掉在太多或太少文档中出现的单词，从而减少噪声和特异性单词的影响。

  8. `max_features`：最大特征数。通过限制特征的数量，可以减少特征空间的维度，从而减少模型的复杂性和计算量。

  9. `stop_words`：停用词列表。通过设置适当的停用词列表，可以去除常见的、对分类任务没有帮助的词语，从而减少噪声。

  10. `sublinear_tf`：子线性TF缩放。通过将`sublinear_tf`设置为True，可以使用子线性缩放来平衡长文本和短文本的特征权重，从而提高模型对不同长度文本的适应性。

  11. `norm`：特征向量的归一化方式。通过调整`norm`参数，可以选择不同的归一化方式，如'`l2`'、'`l1`'或'`none`'，以适应不同的数据分布。

  ```Python
# 生成测试集结果
m = LogisticRegression()
m.fit(train_tfidf_feat, train_df['label'])
test_pred = m.predict(test_tfidf_feat)
test_df['label'] = test_pred
test_df[['name', 'label']].to_csv('lr.csv', index=None)
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://flowus.cn/preview/f55bea12-9e0e-4a36-b012-414a549d7c66" alt="图片.png" loading="lazy"></figure>
<h2 id="目前为止发现的点">目前为止发现的点：</h2>
<ol>
<li>
<p>数据集不平衡</p>
</li>
<li>
<p>停用词删除问题</p>
</li>
<li>
<p><s>max_features</s></p>
</li>
<li>
<p>分类器太弱</p>
</li>
</ol>
<h2 id="任务五使用tfidf特征和xgboost完成训练和预测"><strong>任务五：使用TFIDF特征和XGBoost完成训练和预测</strong></h2>
<ul>
<li>
<p>说明：在这个任务中，你需要使用TFIDF特征和XGBoost算法完成训练和预测，进一步提升文本分类的性能。</p>
</li>
<li>
<p>实践步骤：</p>
<ol>
<li>
<p>准备TFIDF特征矩阵和相应的标签。</p>
</li>
<li>
<p>划分训练集和测试集。</p>
</li>
<li>
<p>使用Sklearn中的XGBoost算法进行训练，并使用训练好的模型对测试集进行预测。</p>
</li>
<li>
<p>评估模型的性能，如准确率、精确率、召回率等指标。</p>
</li>
<li>
<p>选择得到合适的模型，对测试集进行预测，并提高到比赛页面https://challenge.xfyun.cn/topic/info?type=text-detector&amp;ch=vWxQGFU</p>
</li>
</ol>
<figure data-type="image" tabindex="6"><img src="https://flowus.cn/preview/80c42bd9-7618-4a63-b748-0a86d8826f5e" alt="图片.png" loading="lazy"></figure>
<p>结论：SVM效果比较好。。。</p>
<figure data-type="image" tabindex="7"><img src="https://flowus.cn/preview/182b98bf-ecad-479d-b478-eb7bf53b9084" alt="图片.png" loading="lazy"></figure>
<h2 id="任务六学会训练word2vec词向量"><strong>任务六：学会训练Word2Vec词向量</strong></h2>
</li>
<li>
<p>说明：在这个任务中，你将学习如何训练FastText和Word2Vec词向量模型，这些词向量模型可以捕捉文本中的语义信息。</p>
</li>
<li>
<p>实践步骤：</p>
<ol>
<li>
<p>准备大规模文本语料库。</p>
</li>
<li>
<p>使用Word2Vec类，设置相应的参数（如词向量维度、窗口大小、训练迭代次数等）来构建词向量模型。</p>
</li>
<li>
<p>使用Word2Vec类，训练词向量模型。</p>
</li>
</ol>
<figure data-type="image" tabindex="8"><img src="https://flowus.cn/preview/fbd1db21-15bd-4fb0-b1f3-f74d75a087a1" alt="图片.png" loading="lazy"></figure>
</li>
</ul>
<h2 id="任务七使用word2vec词向量搭建textcnn模型进行训练和预测"><strong>任务七：使用Word2Vec词向量，搭建TextCNN模型进行训练和预测</strong></h2>
<figure data-type="image" tabindex="9"><img src="https://flowus.cn/preview/86ce4121-cd85-4ec6-b6cd-f6bef1ebaaee" alt="图片.png" loading="lazy"></figure>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://lab.moguw.top/post/绘画脑电Circos图像/" class="post-title gt-a-link">
                    安装并使用Brainconn绘制Circos图像
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">真真夜夜的小木屋</div>
    <div class="social-container">
        
            
                <a href="https://github.com/Mieluoxxx" target="_blank">
                    <i class="fab fa-github gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
    <div>
        Theme <a href="https://github.com/imhanjie/gridea-theme-pure" target="_blank">Pure</a>, Powered by <a
                href="https://gridea.dev" target="_blank">Gridea</a> | <a href="https://lab.moguw.top/atom.xml" target="_blank">RSS</a>
    </div>
</div>

        <script>
  hljs.highlightAll();
</script>

        <script>
(function() {
	function addEventListener(element, type, handler) {
        if (element.addEventListener) {
            element.addEventListener(type, handler, false);
        } else if (element.attachEvent) {
            element.attachEvent('on' + type, handler);
        }
    }

    addEventListener(window, 'load', function () {
        var Viewer = window.Viewer;
        var pictures = document.querySelector('.post-content');
        var viewer = new Viewer(pictures);
    });
})();
</script>


        <script>
            var ele = document.querySelector(".waline-visitor-count");
            Object.defineProperty(ele, 'innerText', {
                get: function() {
                    return ele.innerText;
                },
                set: function(value) {
                    ele.innerHTML = value;
                    if (value > 0) {
	                    var parent = document.querySelector(".leancloud_visitors");
	                    parent.style.visibility="visible";
	                }
                }
            });
        </script>
    </div>
</div>
</body>
</html>
